# インフラ構成比較 - アクセス情報

## 🎯 目的
3つのインフラ構成案の比較検証を行うためのアクセス情報

## 📊 構成1: VPS構成（現在動作中）

### 基本情報
- **環境**: WSL2 + Docker Compose
- **ドメイン**: aruday1024.xvps.jp
- **外部IP**: 116.94.213.108
- **プロトコル**: HTTP専用（SSL証明書なし）

### アクセスURL
- **メインダッシュボード**: http://116.94.213.108:8080/
- **Strapi管理画面**: http://116.94.213.108:8080/admin
- **API健康状態**: http://116.94.213.108:8080/health
- **監視ダッシュボード**: http://116.94.213.108:9100/
- **デモアプリ**: http://116.94.213.108:3001/
- **Webアプリ**: http://116.94.213.108:3000/

### サービス状況
```
✅ PostgreSQL: 健康状態（ポート5432）
✅ Strapi: 健康状態（ポート1338→1337）
✅ Webapp: 動作中（ポート3000）
✅ Demo-app: 動作中（ポート3001）
✅ Nginx: HTTP専用で正常動作（ポート80, 8080）
✅ Monitoring: 動作中（ポート9100）
✅ Logrotate: 動作中
```

### 技術スタック
- **Webサーバー**: Nginx (Alpine)
- **アプリケーション**: Next.js + Strapi
- **データベース**: PostgreSQL 15
- **コンテナ**: Docker Compose
- **監視**: Node Exporter
- **ログ管理**: Logrotate

## 🔄 構成2: AWS構成（準備中）
- **場所**: `infrastructure/aws-all/terraform/`
- **予定サービス**: ECS, RDS, ALB, CloudFront
- **状況**: 設定ファイル準備済み、デプロイ待ち

## 🔄 構成3: ハイブリッド構成（準備中）
- **場所**: `infrastructure/aws-strapi-only/terraform/`
- **予定サービス**: Strapi on AWS + Frontend on VPS
- **状況**: 設定ファイル準備済み、デプロイ待ち

## 📋 比較検証項目

### パフォーマンス
- [ ] レスポンス時間測定
- [ ] 同時接続数テスト
- [ ] データベースクエリ性能

### 運用性
- [ ] デプロイの簡易性
- [ ] 監視・ログ管理
- [ ] バックアップ・復旧

### コスト
- [ ] 初期構築コスト
- [ ] 月額運用コスト
- [ ] スケーリングコスト

### セキュリティ
- [ ] SSL/TLS設定
- [ ] ファイアウォール設定
- [ ] アクセス制御

## 🚀 次のステップ

1. **VPS構成の動作確認**
   - 外部からのアクセステスト
   - 各機能の動作確認
   - パフォーマンス測定

2. **AWS構成のデプロイ**
   - Terraform実行
   - サービス起動確認
   - 同様の機能テスト

3. **ハイブリッド構成のデプロイ**
   - AWS Strapi + VPS Frontend
   - 連携テスト

4. **比較分析**
   - 各構成の長所・短所
   - 推奨構成の決定

## 📝 メモ
- WSL環境のため、外部アクセスにはポート8080を使用
- DNS設定は旧VPSを指しているため、IPアドレス直接アクセスを使用
- SSL証明書は各構成で個別に設定予定 