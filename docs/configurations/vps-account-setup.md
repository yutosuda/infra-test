# VPSæ§‹æˆã®æº–å‚™ - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã¨ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—

## ðŸŽ¯ **VPSå­¦ç¿’ã®ç›®çš„**
- æ‰‹å‹•ã§ã®ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ã‚’ä½“é¨“
- SSLè¨¼æ˜Žæ›¸ã®æ‰‹å‹•è¨­å®š
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- éšœå®³å¯¾å¿œã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®é‡è¦æ€§ã‚’å®Ÿæ„Ÿ

---

## ðŸ“‹ **å¿…è¦ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹**

### **1. VPSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆæŽ¨å¥¨é †ï¼‰**

#### **ðŸ¥‡ æŽ¨å¥¨: ã•ãã‚‰ã®VPS**
- **æ–™é‡‘**: æœˆé¡580å††ã€œï¼ˆ1GB RAMï¼‰
- **ç‰¹å¾´**: æ—¥æœ¬èªžã‚µãƒãƒ¼ãƒˆã€åˆå¿ƒè€…å‘ã‘
- **URL**: https://vps.sakura.ad.jp/
- **æ”¯æ‰•ã„**: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã€éŠ€è¡ŒæŒ¯è¾¼

**ç”³ã—è¾¼ã¿æ‰‹é †**:
1. ä¸Šè¨˜URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒãŠç”³ã—è¾¼ã¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ©ãƒ³é¸æŠž: **1GBï¼ˆæœˆé¡580å††ï¼‰**ã‚’æŽ¨å¥¨
4. OSé¸æŠž: **Ubuntu 22.04 LTS**
5. ä¼šå“¡ç™»éŒ²ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å¿…è¦ï¼‰
6. æ”¯æ‰•ã„æƒ…å ±å…¥åŠ›
7. ç”³ã—è¾¼ã¿å®Œäº†ï¼ˆé€šå¸¸30åˆ†ä»¥å†…ã«åˆ©ç”¨é–‹å§‹ï¼‰

#### **ðŸ¥ˆ ä»£æ›¿æ¡ˆ1: ConoHa VPS**
- **æ–™é‡‘**: æœˆé¡678å††ã€œï¼ˆ1GB RAMï¼‰
- **ç‰¹å¾´**: æ™‚é–“èª²é‡‘å¯¾å¿œã€é«˜é€ŸSSD
- **URL**: https://www.conoha.jp/vps/

#### **ðŸ¥‰ ä»£æ›¿æ¡ˆ2: Vultrï¼ˆæµ·å¤–ï¼‰**
- **æ–™é‡‘**: $6/æœˆã€œï¼ˆ1GB RAMï¼‰
- **ç‰¹å¾´**: ä¸–ç•Œä¸­ã«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼
- **URL**: https://www.vultr.com/
- **æ³¨æ„**: è‹±èªžã®ã¿ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰å¿…é ˆ

---

### **2. ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—ï¼ˆå¿…é ˆï¼‰**

#### **ðŸ¥‡ æŽ¨å¥¨: ãŠåå‰.com**
- **æ–™é‡‘**: .com ãƒ‰ãƒ¡ã‚¤ãƒ³ å¹´é¡1,408å††ã€œ
- **ç‰¹å¾´**: æ—¥æœ¬æœ€å¤§æ‰‹ã€ç®¡ç†ç”»é¢ãŒæ—¥æœ¬èªž
- **URL**: https://www.onamae.com/

**å–å¾—æ‰‹é †**:
1. ä¸Šè¨˜URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. å¸Œæœ›ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’æ¤œç´¢ï¼ˆä¾‹: `your-name-infra-test.com`ï¼‰
3. åˆ©ç”¨å¯èƒ½ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠž
4. ä¼šå“¡ç™»éŒ²
5. æ”¯æ‰•ã„ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æŽ¨å¥¨ï¼‰
6. DNSè¨­å®šã¯å¾Œã§è¡Œã†

#### **ðŸ¥ˆ ä»£æ›¿æ¡ˆ: ãƒ ãƒ¼ãƒ ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³**
- **æ–™é‡‘**: .com ãƒ‰ãƒ¡ã‚¤ãƒ³ å¹´é¡1,628å††ã€œ
- **URL**: https://muumuu-domain.com/

#### **ðŸ’¡ å­¦ç¿’ç”¨ã®å®‰ä¾¡ã‚ªãƒ—ã‚·ãƒ§ãƒ³**
- **.tk/.ml/.ga** ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆFreenomï¼‰: ç„¡æ–™
- **æ³¨æ„**: ç„¡æ–™ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯åˆ¶é™ãŒå¤šãã€å­¦ç¿’å¾Œã¯ä½¿ãˆãªããªã‚‹å¯èƒ½æ€§

---

### **3. è²»ç”¨ã®ç›®å®‰**

#### **æœˆé¡è²»ç”¨**
- VPS: 580å††ã€œ678å††
- ãƒ‰ãƒ¡ã‚¤ãƒ³: 117å††ï¼ˆå¹´é¡1,408å††Ã·12ãƒ¶æœˆï¼‰
- **åˆè¨ˆ**: ç´„700å††ã€œ800å††/æœˆ

#### **åˆæœŸè²»ç”¨**
- VPSåˆæœŸè²»ç”¨: 0å††ï¼ˆå¤šãã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼‰
- ãƒ‰ãƒ¡ã‚¤ãƒ³å¹´é¡: 1,408å††
- **åˆè¨ˆ**: ç´„1,400å††

#### **å­¦ç¿’æœŸé–“ã®ç·è²»ç”¨ï¼ˆ3ãƒ¶æœˆæƒ³å®šï¼‰**
- VPS: 580å†† Ã— 3ãƒ¶æœˆ = 1,740å††
- ãƒ‰ãƒ¡ã‚¤ãƒ³: 1,408å††ï¼ˆå¹´é¡ï¼‰
- **åˆè¨ˆ**: ç´„3,200å††

---

## ðŸš€ **VPSç”³ã—è¾¼ã¿å¾Œã®åˆæœŸè¨­å®š**

### **Step 1: VPSæŽ¥ç¶šæƒ…å ±ã®ç¢ºèª**
VPSç”³ã—è¾¼ã¿å®Œäº†å¾Œã€ä»¥ä¸‹ã®æƒ…å ±ãŒãƒ¡ãƒ¼ãƒ«ã§é€ã‚‰ã‚Œã¦ãã¾ã™ï¼š
- **IPã‚¢ãƒ‰ãƒ¬ã‚¹**: `xxx.xxx.xxx.xxx`
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼å**: `root` ã¾ãŸã¯ `ubuntu`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰

### **Step 2: SSHæŽ¥ç¶šã®ç¢ºèª**
```bash
# VPSã«æŽ¥ç¶šï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å®Ÿéš›ã®ã‚‚ã®ã«ç½®ãæ›ãˆï¼‰
ssh root@xxx.xxx.xxx.xxx

# åˆå›žæŽ¥ç¶šæ™‚ã¯ fingerprint ã®ç¢ºèªãŒè¡¨ç¤ºã•ã‚Œã‚‹
# "yes" ã¨å…¥åŠ›ã—ã¦ç¶šè¡Œ

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆç”»é¢ã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ï¼‰
```

### **Step 3: åŸºæœ¬çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š**
```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°
apt update && apt upgrade -y

# æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆï¼ˆrootã®ç›´æŽ¥ä½¿ç”¨ã‚’é¿ã‘ã‚‹ï¼‰
adduser deploy
usermod -aG sudo deploy

# SSHéµã®è¨­å®šï¼ˆæŽ¨å¥¨ï¼‰
# ãƒ­ãƒ¼ã‚«ãƒ«ãƒžã‚·ãƒ³ã§éµã‚’ç”Ÿæˆ
ssh-keygen -t rsa -b 4096 -C "your-email@example.com"

# å…¬é–‹éµã‚’VPSã«ã‚³ãƒ”ãƒ¼
ssh-copy-id deploy@xxx.xxx.xxx.xxx
```

---

## ðŸŒ **ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSè¨­å®š**

### **Step 1: ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã®ç¢ºèª**
ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—å¾Œã€DNSè¨­å®šã‚’è¡Œã„ã¾ã™ï¼š

1. **ãŠåå‰.comç®¡ç†ç”»é¢**ã«ãƒ­ã‚°ã‚¤ãƒ³
2. **DNSé–¢é€£æ©Ÿèƒ½ã®è¨­å®š** â†’ **DNSãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®š**
3. å¯¾è±¡ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠž

### **Step 2: Aãƒ¬ã‚³ãƒ¼ãƒ‰ã®è¨­å®š**
```
ãƒ›ã‚¹ãƒˆå: @ (ç©ºæ¬„)
TYPE: A
VALUE: [VPSã®IPã‚¢ãƒ‰ãƒ¬ã‚¹]
TTL: 3600

ãƒ›ã‚¹ãƒˆå: www
TYPE: A  
VALUE: [VPSã®IPã‚¢ãƒ‰ãƒ¬ã‚¹]
TTL: 3600
```

### **Step 3: DNSåæ˜ ã®ç¢ºèª**
```bash
# DNSåæ˜ ç¢ºèªï¼ˆåæ˜ ã¾ã§æœ€å¤§48æ™‚é–“ï¼‰
nslookup your-domain.com
dig your-domain.com

# åæ˜ ã•ã‚Œã‚‹ã¨ VPS ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

---

## âœ… **æº–å‚™å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**

### **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹**
- [ ] VPSã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå®Œäº†
- [ ] VPSåˆ©ç”¨é–‹å§‹ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹å–å¾—ï¼‰
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—å®Œäº†
- [ ] DNSè¨­å®šå®Œäº†

### **æŽ¥ç¶šç¢ºèª**
- [ ] SSHæŽ¥ç¶šæˆåŠŸ
- [ ] sudoæ¨©é™ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³ã§VPSã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

### **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—æº–å‚™**
- [ ] Dockerã€Docker Composeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æº–å‚™
- [ ] SSLè¨¼æ˜Žæ›¸å–å¾—æº–å‚™ï¼ˆLet's Encryptï¼‰
- [ ] å­¦ç¿’è¨˜éŒ²ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™

---

## ðŸŽ¯ **æº–å‚™å®Œäº†å¾Œã®å­¦ç¿’ãƒ•ãƒ­ãƒ¼**

1. **Phase 2-1**: Dockerç’°å¢ƒæ§‹ç¯‰ï¼ˆ1æ—¥ç›®ï¼‰
2. **Phase 2-2**: SSLè¨¼æ˜Žæ›¸ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆ2æ—¥ç›®ï¼‰
3. **Phase 2-3**: é‹ç”¨ä½“é¨“ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ3æ—¥ç›®ï¼‰

### **å­¦ç¿’è¨˜éŒ²ã®æº–å‚™**
```bash
# VPSå­¦ç¿’è¨˜éŒ²ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
cat >> /home/suda/infra-test/learning-log.md << 'EOF'

## Phase 2: VPSæ§‹æˆä½“é¨“

### æº–å‚™æ®µéšŽ
- VPSç”³ã—è¾¼ã¿æ—¥: [æ—¥ä»˜]
- ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—æ—¥: [æ—¥ä»˜]  
- åˆæœŸè²»ç”¨: [é‡‘é¡]

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ï¼ˆæ©Ÿå¯†æƒ…å ±ã¯åˆ¥é€”ç®¡ç†ï¼‰
- VPSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼: [ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å]
- ãƒ‰ãƒ¡ã‚¤ãƒ³: [å–å¾—ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³]
- VPS IP: [IPã‚¢ãƒ‰ãƒ¬ã‚¹]

### æº–å‚™ã§è©°ã¾ã£ãŸãƒã‚¤ãƒ³ãƒˆ
- [å•é¡Œã¨è§£æ±ºæ–¹æ³•]

---
EOF
```

---

## ðŸ’¡ **ã‚ˆãã‚ã‚‹è³ªå•**

### **Q: VPSã¨ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒãƒ¼ã®é•ã„ã¯ï¼Ÿ**
- **VPS**: ä»®æƒ³çš„ãªå°‚ç”¨ã‚µãƒ¼ãƒãƒ¼ã€rootæ¨©é™ã‚ã‚Šã€è‡ªç”±åº¦é«˜ã„
- **ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒãƒ¼**: å…±æœ‰ç’°å¢ƒã€åˆ¶é™ã‚ã‚Šã€ç®¡ç†ãŒç°¡å˜

### **Q: ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å¿…é ˆã§ã™ã‹ï¼Ÿ**
IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ãŒã€SSLè¨¼æ˜Žæ›¸ã®å–å¾—ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚

### **Q: ç„¡æ–™ã®VPSã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ**
AWSã€GCPã€Azureã«ç„¡æ–™æž ãŒã‚ã‚Šã¾ã™ãŒã€è¨­å®šãŒè¤‡é›‘ã§åˆå¿ƒè€…ã«ã¯æŽ¨å¥¨ã—ã¾ã›ã‚“ã€‚

### **Q: å­¦ç¿’å¾Œã€VPSã¯è§£ç´„ã§ãã¾ã™ã‹ï¼Ÿ**
ã¯ã„ã€‚å¤šãã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§æœˆå˜ä½ã§ã®è§£ç´„ãŒå¯èƒ½ã§ã™ã€‚

---

**æº–å‚™ãŒå®Œäº†ã—ãŸã‚‰ã€`docs/phase2-vps.md` ã®æ‰‹é †ã«å¾“ã£ã¦å®Ÿéš›ã®æ§‹ç¯‰ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼** 